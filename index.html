<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TD4 シミュレーター</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>TD4 シミュレーター</h1>
        
        <div class="simulator">
            <div class="registers">
                <div class="register">
                    <label>A レジスタ:</label>
                    <span id="register-a">0000</span>
                </div>
                <div class="register">
                    <label>B レジスタ:</label>
                    <span id="register-b">0000</span>
                </div>
                <div class="register">
                    <label>プログラムカウンタ:</label>
                    <span id="program-counter">0000</span>
                </div>
                <div class="register">
                    <label>出力:</label>
                    <span id="output">0000</span>
                </div>
            </div>
            
            <div class="memory-section">
                <h2>メモリ</h2>
                <div class="memory-container" id="memory-container">
                    <!-- Memory cells will be generated by JavaScript -->
                </div>
            </div>
            
            <div class="controls">
                <button id="step-btn">ステップ実行</button>
                <button id="run-btn">実行</button>
                <button id="reset-btn">リセット</button>
                <div class="speed-control">
                    <label for="speed">実行速度:</label>
                    <input type="range" id="speed" min="1" max="20" value="5">
                </div>
            </div>
            
            <div class="program-input">
                <h2>プログラム入力</h2>
                <textarea id="program-input" placeholder="各行に命令を入力してください（例: 0011）"></textarea>
                <button id="load-program">プログラムをロード</button>
            </div>
        </div>
        
        <div class="instruction-set">
            <h2>TD4 命令セット</h2>
            <table>
                <thead>
                    <tr>
                        <th>命令</th>
                        <th>オペコード</th>
                        <th>説明</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ADD A, Im</td>
                        <td>0000 xxxx</td>
                        <td>A ← A + Im</td>
                    </tr>
                    <tr>
                        <td>MOV A, B</td>
                        <td>0001 xxxx</td>
                        <td>A ← B</td>
                    </tr>
                    <tr>
                        <td>IN A</td>
                        <td>0010 xxxx</td>
                        <td>A ← 入力ポート</td>
                    </tr>
                    <tr>
                        <td>MOV A, Im</td>
                        <td>0011 xxxx</td>
                        <td>A ← Im</td>
                    </tr>
                    <tr>
                        <td>MOV B, A</td>
                        <td>0100 xxxx</td>
                        <td>B ← A</td>
                    </tr>
                    <tr>
                        <td>ADD B, Im</td>
                        <td>0101 xxxx</td>
                        <td>B ← B + Im</td>
                    </tr>
                    <tr>
                        <td>IN B</td>
                        <td>0110 xxxx</td>
                        <td>B ← 入力ポート</td>
                    </tr>
                    <tr>
                        <td>MOV B, Im</td>
                        <td>0111 xxxx</td>
                        <td>B ← Im</td>
                    </tr>
                    <tr>
                        <td>OUT B</td>
                        <td>1001 xxxx</td>
                        <td>出力ポート ← B</td>
                    </tr>
                    <tr>
                        <td>OUT Im</td>
                        <td>1011 xxxx</td>
                        <td>出力ポート ← Im</td>
                    </tr>
                    <tr>
                        <td>JMP Im</td>
                        <td>1111 xxxx</td>
                        <td>PC ← Im</td>
                    </tr>
                    <tr>
                        <td>JNC Im</td>
                        <td>1110 xxxx</td>
                        <td>キャリーフラグが0の場合、PC ← Im</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <script src="td4.js"></script>
    <script src="simulator.js"></script>
</body>
</html>
